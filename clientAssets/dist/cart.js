!function(t){var r={};function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(r){return t[r]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=6)}([function(t,r,e){"use strict";(function(r){var n=e(4),i=e(2),s=e(5),o="localStorage"in r&&r.localStorage?r.localStorage:n;function c(t,r){return 1===arguments.length?a(t):u(t,r)}function a(t){const r=o.getItem(t);return i(r)}function u(t,r){try{return o.setItem(t,JSON.stringify(r)),!0}catch(t){return!1}}c.set=u,c.get=a,c.remove=function(t){return o.removeItem(t)},c.clear=function(){return o.clear()},c.backend=function(t){return t&&(o=t),o},c.on=s.on,c.off=s.off,t.exports=c}).call(this,e(1))},function(t,r){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,r,e){"use strict";t.exports=function(t){const r=function(t){try{return JSON.parse(t)}catch(r){return t}}(t);return void 0===r?null:r}},,function(t,r,e){"use strict";var n={};t.exports={getItem:function(t){return t in n?n[t]:null},setItem:function(t,r){return n[t]=r,!0},removeItem:function(t){return!!(t in n)&&delete n[t]},clear:function(){return n={},!0}}},function(t,r,e){"use strict";(function(r){var n=e(2),i={};function s(t){t||(t=r.event);var e=i[t.key];e&&e.forEach((function(r){r(n(t.newValue),n(t.oldValue),t.url||t.uri)}))}t.exports={on:function(t,e){i[t]?i[t].push(e):i[t]=[e],r.addEventListener?r.addEventListener("storage",s,!1):r.attachEvent?r.attachEvent("onstorage",s):r.onstorage=s},off:function(t,r){var e=i[t];e.length>1?e.splice(e.indexOf(r),1):i[t]=[]}}}).call(this,e(1))},function(t,r,e){"use strict";e.r(r);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function i(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function s(t){return"function"==typeof t}var o=!1,c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;o=t},get useDeprecatedSynchronousErrorHandling(){return o}};function a(t){setTimeout((function(){throw t}),0)}var u={closed:!0,next:function(t){},error:function(t){if(c.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete:function(){}},l=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();var h=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),d=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var r;if(!this.closed){var e,n=this._parentOrParents,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var c=0;c<n.length;++c){n[c].remove(this)}if(s(i))try{i.call(this)}catch(t){r=t instanceof h?p(t.errors):[t]}if(l(o)){c=-1;for(var a=o.length;++c<a;){var u=o[c];if(null!==(e=u)&&"object"==typeof e)try{u.unsubscribe()}catch(t){r=r||[],t instanceof h?r=r.concat(p(t.errors)):r.push(t)}}}if(r)throw new h(r)}},t.prototype.add=function(r){var e=r;if(!r)return t.EMPTY;switch(typeof r){case"function":e=new t(r);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var i=e._parentOrParents;if(null===i)e._parentOrParents=this;else if(i instanceof t){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[e]:s.push(e),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function p(t){return t.reduce((function(t,r){return t.concat(r instanceof h?r.errors:r)}),[])}var b=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),f=function(t){function r(e,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=u;break;case 1:if(!e){s.destination=u;break}if("object"==typeof e){e instanceof r?(s.syncErrorThrowable=e.syncErrorThrowable,s.destination=e,e.add(s)):(s.syncErrorThrowable=!0,s.destination=new m(s,e));break}default:s.syncErrorThrowable=!0,s.destination=new m(s,e,n,i)}return s}return i(r,t),r.prototype[b]=function(){return this},r.create=function(t,e,n){var i=new r(t,e,n);return i.syncErrorThrowable=!1,i},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},r}(d),m=function(t){function r(r,e,n,i){var o,c=t.call(this)||this;c._parentSubscriber=r;var a=c;return s(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==u&&(s((a=Object.create(e)).unsubscribe)&&c.add(a.unsubscribe.bind(a)),a.unsubscribe=c.unsubscribe.bind(c))),c._context=a,c._next=o,c._error=n,c._complete=i,c}return i(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;c.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=c.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;a(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};c.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),c.useDeprecatedSynchronousErrorHandling)throw t;a(t)}},r.prototype.__tryOrSetError=function(t,r,e){if(!c.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return c.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(a(r),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(f);var y=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function v(t){return t}function g(t){return 0===t.length?v:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)}}var w=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,i=function(t,r,e){if(t){if(t instanceof f)return t;if(t[b])return t[b]()}return t||r||e?new f(t,r,e):new f(u)}(t,r,e);if(n?i.add(n.call(i,this.source)):i.add(this.source||c.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),c.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){c.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),!function(t){for(;t;){var r=t,e=r.closed,n=r.destination,i=r.isStopped;if(e||i)return!1;t=n&&n instanceof f?n:null}return!0}(t)?console.warn(r):t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=_(r))((function(r,n){var i;i=e.subscribe((function(r){try{t(r)}catch(t){n(t),i&&i.unsubscribe()}}),n,r)}))},t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},t.prototype[y]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:g(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=_(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function _(t){if(t||(t=c.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var S=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),E=function(t){function r(r,e){var n=t.call(this)||this;return n.subject=r,n.subscriber=e,n.closed=!1,n}return i(r,t),r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},r}(d),x=function(t){function r(r){var e=t.call(this,r)||this;return e.destination=r,e}return i(r,t),r}(f),T=function(t){function r(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return i(r,t),r.prototype[b]=function(){return new x(this)},r.prototype.lift=function(t){var r=new O(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.closed)throw new S;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),i=0;i<e;i++)n[i].next(t)},r.prototype.error=function(t){if(this.closed)throw new S;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),i=0;i<e;i++)n[i].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new S;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new S;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){if(this.closed)throw new S;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new E(this,t))},r.prototype.asObservable=function(){var t=new w;return t.source=this,t},r.create=function(t,r){return new O(t,r)},r}(w),O=function(t){function r(r,e){var n=t.call(this)||this;return n.destination=r,n.source=e,n}return i(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):d.EMPTY},r}(T),C=function(t){function r(r){var e=t.call(this)||this;return e._value=r,e}return i(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);return e&&!e.closed&&r.next(this._value),e},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value},r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},r}(T),P=e(0);class I{constructor(){this.list=P.get("cart-items"),this.totalItem=P.get("cart-count"),this.totalAmount=P.get("cart-amount"),this.initListItems(),this.initTotalItem(),this.cartItem=new C(this._prepareAndBroadcast())}_prepareAndBroadcast(){return{list:this.list,totalItem:this.totalItem,totalAmount:this.totalAmount}}initListItems(){null===this.list&&(P.set("cart-items",[]),this.list=[])}initTotalItem(){null===this.totalItem&&(P.set("cart-count",0),this.totalItem=0)}initTotalAmount(){null===this.totalAmount&&(P.set("cart-amount",0),this.totalAmount=0)}get observable(){return this.cartItem.asObservable()}total(){let t=0,r=0;this.list.forEach(e=>{t+=e.quantity*e.price,r+=e.quantity}),this.totalItem=r,this.totalAmount=t}addItem(t){const r=this.list.findIndex(r=>r.sku===t.sku);-1===r?this.list.push(t):this.increaseQuantity(r),this.save()}increaseQuantity(t,r=!1){this.list[t].quantity++,r&&this.save()}decreaseQuantity(t){this.list[t].quantity>0&&this.list[t].quantity--,this.save()}removeItem(t){this.list=this.list.filter(r=>r.sku!==t),this.save()}save(){this.total(),P.set("cart-items",this.list),P.set("cart-count",this.totalItem),P.set("cart-amount",this.totalAmount),this.cartItem.next(this._prepareAndBroadcast())}}class k{}class j{constructor(){this.variationList={},this.variations=new C([]),this.listenVariationClick()}detachEvents(){$("body").off("click")}get SelectedVariation(){return this.variations.asObservable()}listenVariationClick(){const t=$(".product-variations");this.totalVariations=t.data("variations"),this.productId=t.data("product"),$(".options-item > div").on("click",t=>{const r=$(t.target),e=$(r.parent()),n=$(e.parent()).data("attribute"),i=r.data("value"),s=e.attr("class").split(" ")[1];if(r.hasClass("active"))return;$(".options-item."+s+" > div").removeClass("active"),r.addClass("active"),this.variationList[n]=i,Object.keys(this.variationList).map(t=>this.variationList[t]).length==this.totalVariations&&($("#kodCms-loading").show(),$.ajax({type:"POST",url:"/en/commerce/product/variation?id="+this.productId,data:this.variationList,success:t=>{$("#kodCms-loading").hide(),this.variations.next(t)},dataType:"json"}))})}}class A{constructor(t=new I,r=cartJsConfig,e=new j){this.cart=t,this.selector=r,this.variationEvent=e,this.initializeAddToCartButton(),e.SelectedVariation.subscribe(t=>{t.length<1||t.stock>0&&($("."+this.selector.priceSelector).html(t.formattedPrice),this.product=t)})}get cartItem(){return this.cart.observable}detachEvents(){$("body").off("click")}listenAddToCartButton(t){let r,e,n,i;const s=$(t.target),o=s.parents(".item");null===this.product?(r=o.find(".item-title").text(),e=s.data("price"),i=s.data("id"),n=s.data("sku")):(r=this.product.title,e=this.product.price,i=this.product.id,n=this.product.sku);const c=o.find("img").eq(0).attr("src"),a=new k;a.id=i,a.sku=null!=n?n:i,a.name=r,a.price=e,a.quantity=1,a.image=c,this.cart.addItem(a),function(t,r){const e=$("."+r),n=$(t).parents(".item").find("img").eq(0);if(n){const t=n.clone().offset({top:n.offset().top,left:n.offset().left}).css({opacity:"0.5",position:"absolute",height:"150px",width:"150px","z-index":"100"}).appendTo($("body")).animate({top:e.offset().top+10,left:e.offset().left+10,width:75,height:75},1e3,"easeInOutExpo");setTimeout(()=>{e.effect("shake",{times:2},200)},1500),t.animate({width:0,height:0})}}(s,this.selector.totalCartItemSelector)}listenQuantityButton(t){const r=$(t.target).data("index");"inc"===$(t.target).data("type")?this.cart.increaseQuantity(r,!0):this.cart.decreaseQuantity(r)}listenRemoveButton(t){const r=$(t.target).data("index");this.cart.removeItem(r)}triggerAddToCartButton(){$("."+this.selector.addToCartButtonSelector).click(t=>this.listenAddToCartButton(t))}triggerDynamicButton(){$(".inc-dec-button").on("click",t=>this.listenQuantityButton(t)),$(".cart-remove-item-button").on("click",t=>this.listenRemoveButton(t))}initializeAddToCartButton(){const t=$("."+this.selector.addToCartButtonSelector);t.removeAttr("disabled"),t.click(t=>this.listenAddToCartButton(t))}}function B(t){return t.charAt(0).toUpperCase()+t.slice(1)}function D(t,r){return Math.floor(Math.random()*(r-t))+t}class q{constructor(t=new A,r=cartJsConfig){this.cartEvents=t,this.selector=r,this.listElement=document.getElementById(r.listSelector),this.renderSampleProducts(3)}render(t){this.cartEvents.detachEvents(),this.renderCountItems(t.totalItem),this.renderSummaryList(t),this._drawTable(t.list),this.cartEvents.triggerDynamicButton(),this.dropDownCart()}dropDownCart(){$(".cart-toggle").on("click",t=>{$(".dropdown-cart").fadeIn("slow")})}renderSummaryList(t){let r="";r+='<li class="dropdown-cart-header"><button class="close-cart-button">Close</button></li>';for(let e=0;e<t.list.length;e++)r+=`\n         <li>\n         <span class="item">\n           <span class="item-left">\n               <img style="width:30px; height:20px" src="${t.list[e].image}" alt="cart_item" />\n               <span class="item-info">\n                   <span>${t.list[e].name} </span>\n                   <span>\n                   <button data-type="inc" data-index="${e}" class="btn btn-xs btn-success inc-dec-button">+</button>\n                   ${t.list[e].quantity}\n                   <button data-type="dec" data-index="${e}" class="btn btn-xs btn-danger inc-dec-button">-</button>\n                   </span>\n                   <span>$${t.list[e].price*t.list[e].quantity}</span>\n               </span>\n           </span>\n           <span class="item-right">\n               <button  data-index="${t.list[e].sku}" class="btn btn-xs btn-danger pull-right cart-remove-item-button">x</button>\n           </span>\n       </span>\n     </li>\n         `;r+=`\n      <li class="divider"></li>\n  <li class="dropdown-cart-footer">\n  <span> Total: $${t.totalAmount}</span>\n  <a class="text-center" href="/cart.html">View Cart</a>\n  </li>\n      `,$("."+this.selector.summarySelector).html(r),$(".close-cart-button").click(()=>{$(".dropdown-cart").fadeOut("slow")})}_drawTable(t){this.listElement&&(this.clearList(),$("#"+this.selector.listSelector).html("\n      <table class=\"table\">\n        <tr>\n        <th>Name</th>\n        <th>Quantity</th>\n        <th>Price</th>\n        <th>Action</th>\n    </tr>\n    <tbody id='cart-table-body'>\n    </tbody>\n      </table>\n      "),t.forEach((t,r)=>{$("#cart-table-body").append(`\n      <tr>\n      <td>${t.name}</td>\n      <td>\n      <button data-type="inc" data-index="${r}" class="btn btn-success inc-dec-button">+</button>\n      ${t.quantity}\n      <button data-type="dec" data-index="${r}" class="btn btn-danger inc-dec-button">-</button>\n      </td>\n      <td>${t.price*t.quantity}</td>\n      <td id='${t.sku}-action'>\n      <button data-index="${t.sku}" class="btn btn-danger btn-sm cart-remove-item-button">Remove</button></td>\n      </tr>\n      `)}))}clearList(){this.listElement.innerHTML=null}renderCountItems(t){$("."+this.selector.totalCartItemSelector).html(t.toString())}renderSampleProducts(t){if(!this.selector.sampleProductSelector)return;$("#"+this.selector.sampleProductSelector).html('<div class="row" id="items"></div>');let r="<div class='col-sm-12'><h2>Products sample</h2></div>";for(let i=0;i<t;i++){const t=Math.floor((Math.random()+1)*(i+560));r+=`\n      <div class="col-sm-4 item">\n      <div class="card">\n      <img src="https://picsum.photos/id/${i+1}/250/150" class="card-img-top" alt="https://picsum.photos/200/300">\n      <div class="card-body">\n        <h5 class="card-title item-title">${e=void 0,n=void 0,e=["abandoned","able","absolute","adorable","adventurous"],n=["people","resolve","rub","silly","smile"],B(e[D(0,e.length+1)])+" "+B(n[D(0,n.length+1)])}</h5>\n        <p>Price <span class="item-price" data-price="${t}">$ ${t}</span></p>\n        <p  class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>\n        <button data-id="${i}" class="btn btn-primary ${this.selector.addToCartButtonSelector}">Add to Cart</button>\n      </div>\n    </div>\n    </div>\n      `}var e,n;$("#items").html(r),$("#items").append('\n   \n \n    <textarea style="border: none;background-color:white;" disabled class="form-control" rows="10"> \n   <div class="item"> // class item is required. \n        <img src="..."> // img tag is required\n        <h5 class="item-title">PRODUCT_NAME</h5> // class item-title is required\n        <span class="item-price" data-price="PRODUCT_PRICE">PRODUCT_PRICE</span>// class item-price and attribute data-price is required\n        <button data-id="PRODUCT_ID" class="btn btn-primary addToCartBtn">Add to Cart</button> //attribute data-id is required, addToCartBtn is button  selector\n    </div></textarea>\n    \n    <pre><code>\n    Following config must decleare before cart.js \n   \n    cartJsConfig = {\n      listSelector:\'item-list\', // Attribute type ID - will render cart items inside this node\n      addToCartButtonSelector:\'addToCartBtn\', //will trigger Add to Cart button\n      totalCartItemSelector:\'cart-total-items\', // will render number of items in cart\n      sampleProductSelector:\'sample-products\' //development purpose only\n  };\n    </code></pre>\n    <textarea style="border: none;background-color:white;" disabled class="form-control" rows="5">\n    Dependency \n    "jquery": "^3.5.0",\n    "jquery-ui": "^1.12.1",\n    </textarea>\n<hr>\n    <textarea style="border: none;" disabled class="form-control" rows="10">\n   <body>\n   <span class="cart-total-items"></span>\n   <div id="item-list"></div>\n   </body>\n    <script src="jquery.min.js"><\/script>\n    <script src="jquery-ui.js"><\/script>\n    <script>\n        cartJsConfig = {\n            listSelector:\'item-list\',\n            addToCartButtonSelector:\'add-to-cart-button\',\n            totalCartItemSelector:\'cart-total-items\',\n            sampleProductSelector:\'sample-products\'\n        };\n    <\/script>\n    <script src="cart.js"><\/script>\n    </textarea>\n    '),this.cartEvents.triggerAddToCartButton()}}new class{constructor(){const t=new q,r=t.cartEvents.cartItem.subscribe(r=>t.render(r));window.onbeforeunload=()=>r.unsubscribe()}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xvY2FsLXN0b3JhZ2UvbG9jYWwtc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2NhbC1zdG9yYWdlL3BhcnNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2NhbC1zdG9yYWdlL3N0dWIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xvY2FsLXN0b3JhZ2UvdHJhY2tpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaG9zdFJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3Vic2NyaXB0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNPYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaWRlbnRpdHkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9waXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC90b1N1YnNjcmliZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9jYW5SZXBvcnRFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL1N1YmplY3RTdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3ViamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9CZWhhdmlvclN1YmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9jYXJ0Lm1vZGVsLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvcHJvZHVjdC5tb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmFyaWF0aW9uRXZlbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZnVuY3Rpb25zL2FuaW1hdGVDYXJ0LnRzIiwid2VicGFjazovLy8uL3NyYy9mdW5jdGlvbnMvcmFuZG9tTmFtZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9hcHAubW9kZWwudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJzdHViIiwicGFyc2UiLCJ0cmFja2luZyIsImxzIiwiZ2xvYmFsIiwibG9jYWxTdG9yYWdlIiwiYWNjZXNzb3IiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzZXQiLCJyYXciLCJnZXRJdGVtIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlIiwicmVtb3ZlIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwiYmFja2VuZCIsInN0b3JlIiwib24iLCJvZmYiLCJnIiwidGhpcyIsIkZ1bmN0aW9uIiwid2luZG93IiwicmF3VmFsdWUiLCJwYXJzZWQiLCJlcnIiLCJwYXJzZVZhbHVlIiwidW5kZWZpbmVkIiwibXMiLCJsaXN0ZW5lcnMiLCJjaGFuZ2UiLCJldmVudCIsImFsbCIsImZvckVhY2giLCJsaXN0ZW5lciIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCJ1cmwiLCJ1cmkiLCJmbiIsInB1c2giLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJvbnN0b3JhZ2UiLCJzcGxpY2UiLCJpbmRleE9mIiwiZXh0ZW5kU3RhdGljcyIsImIiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiX19leHRlbmRzIiwiX18iLCJjb25zdHJ1Y3RvciIsImlzRnVuY3Rpb24iLCJ4IiwiX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzIiwiY29uZmlnIiwiUHJvbWlzZSIsIkVycm9yIiwic3RhY2siLCJob3N0UmVwb3J0RXJyb3IiLCJzZXRUaW1lb3V0IiwiZW1wdHkiLCJjbG9zZWQiLCJuZXh0IiwiZXJyb3IiLCJ1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIiwiY29tcGxldGUiLCJpc0FycmF5IiwiVW5zdWJzY3JpcHRpb25FcnJvciIsIlVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsIiwiZXJyb3JzIiwibWVzc2FnZSIsIm1hcCIsInRvU3RyaW5nIiwiam9pbiIsIlN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwiX3BhcmVudE9yUGFyZW50cyIsIl9zdWJzY3JpcHRpb25zIiwiX3Vuc3Vic2NyaWJlIiwiaW5kZXgiLCJmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMiLCJsZW4iLCJzdWIiLCJjb25jYXQiLCJhZGQiLCJ0ZWFyZG93biIsInN1YnNjcmlwdGlvbiIsIkVNUFRZIiwidG1wIiwic3Vic2NyaXB0aW9ucyIsInN1YnNjcmlwdGlvbkluZGV4IiwicmVkdWNlIiwiZXJycyIsInJ4U3Vic2NyaWJlciIsIk1hdGgiLCJyYW5kb20iLCJfc3VwZXIiLCJTdWJzY3JpYmVyIiwiZGVzdGluYXRpb25Pck5leHQiLCJfdGhpcyIsInN5bmNFcnJvclZhbHVlIiwic3luY0Vycm9yVGhyb3duIiwic3luY0Vycm9yVGhyb3dhYmxlIiwiaXNTdG9wcGVkIiwiZGVzdGluYXRpb24iLCJzdWJzY3JpYmVyIiwiX25leHQiLCJfZXJyb3IiLCJfY29tcGxldGUiLCJfdW5zdWJzY3JpYmVBbmRSZWN5Y2xlIiwiU2FmZVN1YnNjcmliZXIiLCJfcGFyZW50U3Vic2NyaWJlciIsIm9ic2VydmVyT3JOZXh0IiwiY29udGV4dCIsIl9jb250ZXh0IiwiX190cnlPclNldEVycm9yIiwiX190cnlPclVuc3ViIiwid3JhcHBlZENvbXBsZXRlIiwicGFyZW50Iiwib2JzZXJ2YWJsZSIsImlkZW50aXR5IiwicGlwZUZyb21BcnJheSIsImZucyIsImlucHV0IiwicHJldiIsIk9ic2VydmFibGUiLCJzdWJzY3JpYmUiLCJfaXNTY2FsYXIiLCJfc3Vic2NyaWJlIiwibGlmdCIsIm9wZXJhdG9yIiwic291cmNlIiwic2luayIsIm5leHRPck9ic2VydmVyIiwidG9TdWJzY3JpYmVyIiwiX3RyeVN1YnNjcmliZSIsIm9ic2VydmVyIiwiX2EiLCJjbG9zZWRfMSIsImNhblJlcG9ydEVycm9yIiwiY29uc29sZSIsIndhcm4iLCJwcm9taXNlQ3RvciIsImdldFByb21pc2VDdG9yIiwicmVzb2x2ZSIsInJlamVjdCIsInBpcGUiLCJvcGVyYXRpb25zIiwiX2kiLCJ0b1Byb21pc2UiLCJPYmplY3RVbnN1YnNjcmliZWRFcnJvciIsIk9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbCIsIlN1YmplY3RTdWJzY3JpcHRpb24iLCJzdWJqZWN0Iiwib2JzZXJ2ZXJzIiwic3Vic2NyaWJlckluZGV4IiwiU3ViamVjdFN1YnNjcmliZXIiLCJTdWJqZWN0IiwiaGFzRXJyb3IiLCJ0aHJvd25FcnJvciIsImNvcHkiLCJzbGljZSIsImFzT2JzZXJ2YWJsZSIsIkFub255bW91c1N1YmplY3QiLCJCZWhhdmlvclN1YmplY3QiLCJfdmFsdWUiLCJnZXRWYWx1ZSIsImNvbmZpZ3VyYWJsZSIsImxpc3QiLCJ0b3RhbEl0ZW0iLCJ0b3RhbEFtb3VudCIsImluaXRMaXN0SXRlbXMiLCJpbml0VG90YWxJdGVtIiwiY2FydEl0ZW0iLCJfcHJlcGFyZUFuZEJyb2FkY2FzdCIsInR0bCIsImNvdW50IiwicXVhbnRpdHkiLCJwcmljZSIsIml0ZW0iLCJmaW5kSW5kZXgiLCJza3UiLCJpbmNyZWFzZVF1YW50aXR5Iiwic2F2ZSIsImZpbHRlciIsInRvdGFsIiwiUHJvZHVjdCIsInZhcmlhdGlvbkxpc3QiLCJ2YXJpYXRpb25zIiwibGlzdGVuVmFyaWF0aW9uQ2xpY2siLCIkIiwiJHByb2R1Y3QiLCJ0b3RhbFZhcmlhdGlvbnMiLCJkYXRhIiwicHJvZHVjdElkIiwidGFyZ2V0IiwiYXR0cmlidXRlTmFtZSIsImF0dHJpYnV0ZVZhbHVlIiwicGFyZW50Q2xhc3MiLCJhdHRyIiwic3BsaXQiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJrZXlzIiwic2hvdyIsImFqYXgiLCJ0eXBlIiwic3VjY2VzcyIsInJlcyIsImhpZGUiLCJkYXRhVHlwZSIsImNhcnQiLCJzZWxlY3RvciIsImNhcnRKc0NvbmZpZyIsInZhcmlhdGlvbkV2ZW50IiwiaW5pdGlhbGl6ZUFkZFRvQ2FydEJ1dHRvbiIsIlNlbGVjdGVkVmFyaWF0aW9uIiwic3RvY2siLCJwcmljZVNlbGVjdG9yIiwiaHRtbCIsImZvcm1hdHRlZFByaWNlIiwicHJvZHVjdCIsImlkIiwicGFyZW50cyIsImZpbmQiLCJ0ZXh0IiwidGl0bGUiLCJpbWciLCJlcSIsImltYWdlIiwiYWRkSXRlbSIsImNhcmRJY29uU2VsZWN0b3IiLCJpbWd0b2RyYWciLCJpbWdjbG9uZSIsImNsb25lIiwib2Zmc2V0IiwidG9wIiwibGVmdCIsImNzcyIsImFwcGVuZFRvIiwiYW5pbWF0ZSIsImVmZmVjdCIsInRpbWVzIiwiYW5pbWF0ZUFkZFRvQ2FydCIsInRvdGFsQ2FydEl0ZW1TZWxlY3RvciIsImRlY3JlYXNlUXVhbnRpdHkiLCJhZGRUb0NhcnRCdXR0b25TZWxlY3RvciIsImNsaWNrIiwibGlzdGVuQWRkVG9DYXJ0QnV0dG9uIiwibGlzdGVuUXVhbnRpdHlCdXR0b24iLCJsaXN0ZW5SZW1vdmVCdXR0b24iLCJidXR0b24iLCJyZW1vdmVBdHRyIiwiY2FwRmlyc3QiLCJzdHJpbmciLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImdldFJhbmRvbUludCIsIm1pbiIsIm1heCIsImZsb29yIiwiY2FydEV2ZW50cyIsImxpc3RFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImxpc3RTZWxlY3RvciIsInJlbmRlclNhbXBsZVByb2R1Y3RzIiwiZGV0YWNoRXZlbnRzIiwicmVuZGVyQ291bnRJdGVtcyIsInJlbmRlclN1bW1hcnlMaXN0IiwiX2RyYXdUYWJsZSIsInRyaWdnZXJEeW5hbWljQnV0dG9uIiwiZHJvcERvd25DYXJ0IiwiZmFkZUluIiwic3VtbWFyeVNlbGVjdG9yIiwiZmFkZU91dCIsIml0ZW1zIiwiY2xlYXJMaXN0IiwiYXBwZW5kIiwiaW5uZXJIVE1MIiwibnVtYmVyT2ZQcm9kdWN0cyIsInNhbXBsZVByb2R1Y3RTZWxlY3RvciIsIm5hbWUxIiwibmFtZTIiLCJ0cmlnZ2VyQWRkVG9DYXJ0QnV0dG9uIiwicmVuZGVyZXIiLCJyZW5kZXIiLCJvbmJlZm9yZXVubG9hZCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVL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RW5DOUIsRUFBUzZCLEVBQU16QixFQUFhLEVBQUd5QixFQUFNMVIsT0FBUyxLQUFPLElBQU02UCxFQUFTOEIsRUFBTTFCLEVBQWEsRUFBRzBCLEVBQU0zUixPQUFTLG9FQ2lJN0RpTCxRQUFZQSw0S0FFekNuRyw2QkFDbkI5RCxLQUFLb00sU0FBU2tDLDhGRHpJZixJQUNGb0MsRUFFQUMsRUM2SUQ5RixFQUFFLFVBQVU4QixLQUFLQSxHQUNqQjlCLEVBQUUsVUFBVXlGLE9BQU8sbTJEQTZDbkJ0USxLQUFLcVAsV0FBV3VCLDBCQ3JNVixJQ1dILE1BQ0gsY0FHSSxNQUFNQyxFQUFXLElBQUksRUFDZnZLLEVBQWF1SyxFQUFTeEIsV0FBV3pGLFNBQVMvQyxVQUFXMUUsR0FDdkQwTyxFQUFTQyxPQUFPM08sSUFFcEJqQyxPQUFPNlEsZUFBaUIsSUFBTXpLLEVBQVc1QyIsImZpbGUiOiJjYXJ0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDYpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgc3R1YiA9IHJlcXVpcmUoJy4vc3R1YicpO1xudmFyIHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZScpO1xudmFyIHRyYWNraW5nID0gcmVxdWlyZSgnLi90cmFja2luZycpO1xudmFyIGxzID0gJ2xvY2FsU3RvcmFnZScgaW4gZ2xvYmFsICYmIGdsb2JhbC5sb2NhbFN0b3JhZ2UgPyBnbG9iYWwubG9jYWxTdG9yYWdlIDogc3R1YjtcblxuZnVuY3Rpb24gYWNjZXNzb3IgKGtleSwgdmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gZ2V0KGtleSk7XG4gIH1cbiAgcmV0dXJuIHNldChrZXksIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gZ2V0IChrZXkpIHtcbiAgY29uc3QgcmF3ID0gbHMuZ2V0SXRlbShrZXkpO1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZShyYXcpO1xuICByZXR1cm4gcGFyc2VkO1xufVxuXG5mdW5jdGlvbiBzZXQgKGtleSwgdmFsdWUpIHtcbiAgdHJ5IHtcbiAgICBscy5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmUgKGtleSkge1xuICByZXR1cm4gbHMucmVtb3ZlSXRlbShrZXkpO1xufVxuXG5mdW5jdGlvbiBjbGVhciAoKSB7XG4gIHJldHVybiBscy5jbGVhcigpO1xufVxuXG5mdW5jdGlvbiBiYWNrZW5kIChzdG9yZSkge1xuICBzdG9yZSAmJiAobHMgPSBzdG9yZSk7XG5cbiAgcmV0dXJuIGxzO1xufVxuXG5hY2Nlc3Nvci5zZXQgPSBzZXQ7XG5hY2Nlc3Nvci5nZXQgPSBnZXQ7XG5hY2Nlc3Nvci5yZW1vdmUgPSByZW1vdmU7XG5hY2Nlc3Nvci5jbGVhciA9IGNsZWFyO1xuYWNjZXNzb3IuYmFja2VuZCA9IGJhY2tlbmQ7XG5hY2Nlc3Nvci5vbiA9IHRyYWNraW5nLm9uO1xuYWNjZXNzb3Iub2ZmID0gdHJhY2tpbmcub2ZmO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFjY2Vzc29yO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBwYXJzZSAocmF3VmFsdWUpIHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2VWYWx1ZShyYXdWYWx1ZSk7XG5cbiAgaWYgKHBhcnNlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gcGFyc2VkO1xufVxuXG5mdW5jdGlvbiBwYXJzZVZhbHVlIChyYXdWYWx1ZSkge1xuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHJhd1ZhbHVlKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHJhd1ZhbHVlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2U7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBtcyA9IHt9O1xuXG5mdW5jdGlvbiBnZXRJdGVtIChrZXkpIHtcbiAgcmV0dXJuIGtleSBpbiBtcyA/IG1zW2tleV0gOiBudWxsO1xufVxuXG5mdW5jdGlvbiBzZXRJdGVtIChrZXksIHZhbHVlKSB7XG4gIG1zW2tleV0gPSB2YWx1ZTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUl0ZW0gKGtleSkge1xuICB2YXIgZm91bmQgPSBrZXkgaW4gbXM7XG4gIGlmIChmb3VuZCkge1xuICAgIHJldHVybiBkZWxldGUgbXNba2V5XTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGNsZWFyICgpIHtcbiAgbXMgPSB7fTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRJdGVtOiBnZXRJdGVtLFxuICBzZXRJdGVtOiBzZXRJdGVtLFxuICByZW1vdmVJdGVtOiByZW1vdmVJdGVtLFxuICBjbGVhcjogY2xlYXJcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBwYXJzZSA9IHJlcXVpcmUoJy4vcGFyc2UnKTtcbnZhciBsaXN0ZW5lcnMgPSB7fTtcbnZhciBsaXN0ZW5pbmcgPSBmYWxzZTtcblxuZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCBjaGFuZ2UsIGZhbHNlKTtcbiAgfSBlbHNlIGlmIChnbG9iYWwuYXR0YWNoRXZlbnQpIHtcbiAgICBnbG9iYWwuYXR0YWNoRXZlbnQoJ29uc3RvcmFnZScsIGNoYW5nZSk7XG4gIH0gZWxzZSB7XG4gICAgZ2xvYmFsLm9uc3RvcmFnZSA9IGNoYW5nZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjaGFuZ2UgKGUpIHtcbiAgaWYgKCFlKSB7XG4gICAgZSA9IGdsb2JhbC5ldmVudDtcbiAgfVxuICB2YXIgYWxsID0gbGlzdGVuZXJzW2Uua2V5XTtcbiAgaWYgKGFsbCkge1xuICAgIGFsbC5mb3JFYWNoKGZpcmUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlyZSAobGlzdGVuZXIpIHtcbiAgICBsaXN0ZW5lcihwYXJzZShlLm5ld1ZhbHVlKSwgcGFyc2UoZS5vbGRWYWx1ZSksIGUudXJsIHx8IGUudXJpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvbiAoa2V5LCBmbikge1xuICBpZiAobGlzdGVuZXJzW2tleV0pIHtcbiAgICBsaXN0ZW5lcnNba2V5XS5wdXNoKGZuKTtcbiAgfSBlbHNlIHtcbiAgICBsaXN0ZW5lcnNba2V5XSA9IFtmbl07XG4gIH1cbiAgaWYgKGxpc3RlbmluZyA9PT0gZmFsc2UpIHtcbiAgICBsaXN0ZW4oKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvZmYgKGtleSwgZm4pIHtcbiAgdmFyIG5zID0gbGlzdGVuZXJzW2tleV07XG4gIGlmIChucy5sZW5ndGggPiAxKSB7XG4gICAgbnMuc3BsaWNlKG5zLmluZGV4T2YoZm4pLCAxKTtcbiAgfSBlbHNlIHtcbiAgICBsaXN0ZW5lcnNba2V5XSA9IFtdO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBvbjogb24sXG4gIG9mZjogb2ZmXG59O1xuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRnVuY3Rpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG52YXIgX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzID0gZmFsc2U7XG5leHBvcnQgdmFyIGNvbmZpZyA9IHtcbiAgICBQcm9taXNlOiB1bmRlZmluZWQsXG4gICAgc2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAvKkBfX1BVUkVfXyovIG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLndhcm4oJ0RFUFJFQ0FURUQhIFJ4SlMgd2FzIHNldCB0byB1c2UgZGVwcmVjYXRlZCBzeW5jaHJvbm91cyBlcnJvciBoYW5kbGluZyBiZWhhdmlvciBieSBjb2RlIGF0OiBcXG4nICsgZXJyb3Iuc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncykge1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLmxvZygnUnhKUzogQmFjayB0byBhIGJldHRlciBlcnJvciBiZWhhdmlvci4gVGhhbmsgeW91LiA8MycpO1xuICAgICAgICB9XG4gICAgICAgIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyA9IHZhbHVlO1xuICAgIH0sXG4gICAgZ2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcoKSB7XG4gICAgICAgIHJldHVybiBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3M7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdFJlcG9ydEVycm9yKGVycikge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0sIDApO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG9zdFJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfY29uZmlnLF91dGlsX2hvc3RSZXBvcnRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBob3N0UmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvaG9zdFJlcG9ydEVycm9yJztcbmV4cG9ydCB2YXIgZW1wdHkgPSB7XG4gICAgY2xvc2VkOiB0cnVlLFxuICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyB9LFxuICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgaXNBcnJheSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkgfHwgKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcic7IH0pOyB9KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNBcnJheS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbnZhciBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbChlcnJvcnMpIHtcbiAgICAgICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3JzID9cbiAgICAgICAgICAgIGVycm9ycy5sZW5ndGggKyBcIiBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxcblwiICsgZXJyb3JzLm1hcChmdW5jdGlvbiAoZXJyLCBpKSB7IHJldHVybiBpICsgMSArIFwiKSBcIiArIGVyci50b1N0cmluZygpOyB9KS5qb2luKCdcXG4gICcpIDogJyc7XG4gICAgICAgIHRoaXMubmFtZSA9ICdVbnN1YnNjcmlwdGlvbkVycm9yJztcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbC5wcm90b3R5cGUgPSAvKkBfX1BVUkVfXyovIE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgICByZXR1cm4gVW5zdWJzY3JpcHRpb25FcnJvckltcGw7XG59KSgpO1xuZXhwb3J0IHZhciBVbnN1YnNjcmlwdGlvbkVycm9yID0gVW5zdWJzY3JpcHRpb25FcnJvckltcGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1VbnN1YnNjcmlwdGlvbkVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfdXRpbF9pc0FycmF5LF91dGlsX2lzT2JqZWN0LF91dGlsX2lzRnVuY3Rpb24sX3V0aWxfVW5zdWJzY3JpcHRpb25FcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBpc0FycmF5IH0gZnJvbSAnLi91dGlsL2lzQXJyYXknO1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuL3V0aWwvaXNPYmplY3QnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IFVuc3Vic2NyaXB0aW9uRXJyb3IgfSBmcm9tICcuL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvcic7XG52YXIgU3Vic2NyaXB0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbih1bnN1YnNjcmliZSkge1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnRPclBhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgaWYgKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IHVuc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlcnJvcnM7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnRPclBhcmVudHMgPSBfYS5fcGFyZW50T3JQYXJlbnRzLCBfdW5zdWJzY3JpYmUgPSBfYS5fdW5zdWJzY3JpYmUsIF9zdWJzY3JpcHRpb25zID0gX2EuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcGFyZW50T3JQYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIGlmIChfcGFyZW50T3JQYXJlbnRzIGluc3RhbmNlb2YgU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBfcGFyZW50T3JQYXJlbnRzLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfcGFyZW50T3JQYXJlbnRzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgX3BhcmVudE9yUGFyZW50cy5sZW5ndGg7ICsraW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBfcGFyZW50T3JQYXJlbnRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBwYXJlbnRfMS5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oX3Vuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBfdW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZSBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IgPyBmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZS5lcnJvcnMpIDogW2VdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KF9zdWJzY3JpcHRpb25zKSkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgICAgICB2YXIgbGVuID0gX3N1YnNjcmlwdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ViID0gX3N1YnNjcmlwdGlvbnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdChzdWIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZS5lcnJvcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvcnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRlYXJkb3duKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0ZWFyZG93bjtcbiAgICAgICAgaWYgKCF0ZWFyZG93bikge1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHR5cGVvZiB0ZWFyZG93bikge1xuICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGVhcmRvd24pO1xuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uID09PSB0aGlzIHx8IHN1YnNjcmlwdGlvbi5jbG9zZWQgfHwgdHlwZW9mIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIShzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBTdWJzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLl9zdWJzY3JpcHRpb25zID0gW3RtcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkIHRlYXJkb3duICcgKyB0ZWFyZG93biArICcgYWRkZWQgdG8gU3Vic2NyaXB0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBfcGFyZW50T3JQYXJlbnRzID0gc3Vic2NyaXB0aW9uLl9wYXJlbnRPclBhcmVudHM7XG4gICAgICAgIGlmIChfcGFyZW50T3JQYXJlbnRzID09PSBudWxsKSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24uX3BhcmVudE9yUGFyZW50cyA9IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX3BhcmVudE9yUGFyZW50cyBpbnN0YW5jZW9mIFN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgaWYgKF9wYXJlbnRPclBhcmVudHMgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLl9wYXJlbnRPclBhcmVudHMgPSBbX3BhcmVudE9yUGFyZW50cywgdGhpc107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX3BhcmVudE9yUGFyZW50cy5pbmRleE9mKHRoaXMpID09PSAtMSkge1xuICAgICAgICAgICAgX3BhcmVudE9yUGFyZW50cy5wdXNoKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25zID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gW3N1YnNjcmlwdGlvbl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gdGhpcy5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25JbmRleCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuc3BsaWNlKHN1YnNjcmlwdGlvbkluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLkVNUFRZID0gKGZ1bmN0aW9uIChlbXB0eSkge1xuICAgICAgICBlbXB0eS5jbG9zZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgfShuZXcgU3Vic2NyaXB0aW9uKCkpKTtcbiAgICByZXR1cm4gU3Vic2NyaXB0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFN1YnNjcmlwdGlvbiB9O1xuZnVuY3Rpb24gZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGVycm9ycykge1xuICAgIHJldHVybiBlcnJvcnMucmVkdWNlKGZ1bmN0aW9uIChlcnJzLCBlcnIpIHsgcmV0dXJuIGVycnMuY29uY2F0KChlcnIgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSA/IGVyci5lcnJvcnMgOiBlcnIpOyB9LCBbXSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpcHRpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoeCkge1xuICAgIHJldHVybiB4ICE9PSBudWxsICYmIHR5cGVvZiB4ID09PSAnb2JqZWN0Jztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzT2JqZWN0LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciByeFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyAvKkBfX1BVUkVfXyovIFN5bWJvbCgncnhTdWJzY3JpYmVyJylcbiAgICAgICAgOiAnQEByeFN1YnNjcmliZXJfJyArIC8qQF9fUFVSRV9fKi8gTWF0aC5yYW5kb20oKTtcbn0pKCk7XG5leHBvcnQgdmFyICQkcnhTdWJzY3JpYmVyID0gcnhTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnhTdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfdXRpbF9pc0Z1bmN0aW9uLF9PYnNlcnZlcixfU3Vic2NyaXB0aW9uLF9pbnRlcm5hbF9zeW1ib2xfcnhTdWJzY3JpYmVyLF9jb25maWcsX3V0aWxfaG9zdFJlcG9ydEVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgZW1wdHkgYXMgZW1wdHlPYnNlcnZlciB9IGZyb20gJy4vT2JzZXJ2ZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL2ludGVybmFsL3N5bWJvbC9yeFN1YnNjcmliZXInO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgaG9zdFJlcG9ydEVycm9yIH0gZnJvbSAnLi91dGlsL2hvc3RSZXBvcnRFcnJvcic7XG52YXIgU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmliZXIoZGVzdGluYXRpb25Pck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zeW5jRXJyb3JWYWx1ZSA9IG51bGw7XG4gICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZW1wdHlPYnNlcnZlcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uT3JOZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZW1wdHlPYnNlcnZlcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVzdGluYXRpb25Pck5leHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbk9yTmV4dCBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IGRlc3RpbmF0aW9uT3JOZXh0LnN5bmNFcnJvclRocm93YWJsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb25Pck5leHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbk9yTmV4dC5hZGQoX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKF90aGlzLCBkZXN0aW5hdGlvbk9yTmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKF90aGlzLCBkZXN0aW5hdGlvbk9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YnNjcmliZXIucHJvdG90eXBlW3J4U3Vic2NyaWJlclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuICAgIFN1YnNjcmliZXIuY3JlYXRlID0gZnVuY3Rpb24gKG5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIHN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3BhcmVudE9yUGFyZW50cyA9IHRoaXMuX3BhcmVudE9yUGFyZW50cztcbiAgICAgICAgdGhpcy5fcGFyZW50T3JQYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnRPclBhcmVudHMgPSBfcGFyZW50T3JQYXJlbnRzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTdWJzY3JpYmVyO1xufShTdWJzY3JpcHRpb24pKTtcbmV4cG9ydCB7IFN1YnNjcmliZXIgfTtcbnZhciBTYWZlU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTYWZlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTYWZlU3Vic2NyaWJlcihfcGFyZW50U3Vic2NyaWJlciwgb2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IF9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBfdGhpcztcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob2JzZXJ2ZXJPck5leHQpKSB7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob2JzZXJ2ZXJPck5leHQpIHtcbiAgICAgICAgICAgIG5leHQgPSBvYnNlcnZlck9yTmV4dC5uZXh0O1xuICAgICAgICAgICAgZXJyb3IgPSBvYnNlcnZlck9yTmV4dC5lcnJvcjtcbiAgICAgICAgICAgIGNvbXBsZXRlID0gb2JzZXJ2ZXJPck5leHQuY29tcGxldGU7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZXJPck5leHQgIT09IGVtcHR5T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gT2JqZWN0LmNyZWF0ZShvYnNlcnZlck9yTmV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udGV4dC51bnN1YnNjcmliZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkKGNvbnRleHQudW5zdWJzY3JpYmUuYmluZChjb250ZXh0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQudW5zdWJzY3JpYmUgPSBfdGhpcy51bnN1YnNjcmliZS5iaW5kKF90aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIF90aGlzLl9uZXh0ID0gbmV4dDtcbiAgICAgICAgX3RoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgIF90aGlzLl9jb21wbGV0ZSA9IGNvbXBsZXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQgJiYgdGhpcy5fbmV4dCkge1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgICAgIGlmICghY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHRoaXMuX25leHQsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB0aGlzLl9uZXh0LCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgICAgIHZhciB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nID0gY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmc7XG4gICAgICAgICAgICBpZiAodGhpcy5fZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9lcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX2Vycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICBpZiAodXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZENvbXBsZXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2NvbXBsZXRlLmNhbGwoX3RoaXMuX2NvbnRleHQpOyB9O1xuICAgICAgICAgICAgICAgIGlmICghY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih3cmFwcGVkQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgd3JhcHBlZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JVbnN1YiA9IGZ1bmN0aW9uIChmbiwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX190cnlPclNldEVycm9yID0gZnVuY3Rpb24gKHBhcmVudCwgZm4sIHZhbHVlKSB7XG4gICAgICAgIGlmICghY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYmFkIGNhbGwnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLl9jb250ZXh0LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudFN1YnNjcmliZXIgPSBudWxsO1xuICAgICAgICBfcGFyZW50U3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIFNhZmVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG5leHBvcnQgeyBTYWZlU3Vic2NyaWJlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaWJlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgb2JzZXJ2YWJsZSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLm9ic2VydmFibGUgfHwgJ0BAb2JzZXJ2YWJsZSc7IH0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KHgpIHtcbiAgICByZXR1cm4geDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlkZW50aXR5LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfaWRlbnRpdHkgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tICcuL2lkZW50aXR5JztcbmV4cG9ydCBmdW5jdGlvbiBwaXBlKCkge1xuICAgIHZhciBmbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBmbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIHBpcGVGcm9tQXJyYXkoZm5zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlRnJvbUFycmF5KGZucykge1xuICAgIGlmIChmbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICB9XG4gICAgaWYgKGZucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZuc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHBpcGVkKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBmbnMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBmbikgeyByZXR1cm4gZm4ocHJldik7IH0sIGlucHV0KTtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfY2FuUmVwb3J0RXJyb3IsX3V0aWxfdG9TdWJzY3JpYmVyLF9zeW1ib2xfb2JzZXJ2YWJsZSxfdXRpbF9waXBlLF9jb25maWcgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgY2FuUmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvY2FuUmVwb3J0RXJyb3InO1xuaW1wb3J0IHsgdG9TdWJzY3JpYmVyIH0gZnJvbSAnLi91dGlsL3RvU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi9zeW1ib2wvb2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBwaXBlRnJvbUFycmF5IH0gZnJvbSAnLi91dGlsL3BpcGUnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xudmFyIE9ic2VydmFibGUgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIG9ic2VydmFibGUub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgb3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yO1xuICAgICAgICB2YXIgc2luayA9IHRvU3Vic2NyaWJlcihvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgaWYgKG9wZXJhdG9yKSB7XG4gICAgICAgICAgICBzaW5rLmFkZChvcGVyYXRvci5jYWxsKHNpbmssIHRoaXMuc291cmNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaW5rLmFkZCh0aGlzLnNvdXJjZSB8fCAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgJiYgIXNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlKHNpbmspIDpcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlTdWJzY3JpYmUoc2luaykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoc2luay5zeW5jRXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbms7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHNpbmspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUoc2luayk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FuUmVwb3J0RXJyb3Ioc2luaykpIHtcbiAgICAgICAgICAgICAgICBzaW5rLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChuZXh0LCBwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGVbU3ltYm9sX29ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvcGVyYXRpb25zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBvcGVyYXRpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wZXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZUZyb21BcnJheShvcGVyYXRpb25zKSh0aGlzKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHZhbHVlID0geDsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcmVqZWN0KGVycik7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKHN1YnNjcmliZSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oKSk7XG5leHBvcnQgeyBPYnNlcnZhYmxlIH07XG5mdW5jdGlvbiBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcikge1xuICAgIGlmICghcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBjb25maWcuUHJvbWlzZSB8fCBQcm9taXNlO1xuICAgIH1cbiAgICBpZiAoIXByb21pc2VDdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gUHJvbWlzZSBpbXBsIGZvdW5kJyk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlQ3Rvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyLF9zeW1ib2xfcnhTdWJzY3JpYmVyLF9PYnNlcnZlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vc3ltYm9sL3J4U3Vic2NyaWJlcic7XG5pbXBvcnQgeyBlbXB0eSBhcyBlbXB0eU9ic2VydmVyIH0gZnJvbSAnLi4vT2JzZXJ2ZXInO1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgaWYgKG5leHRPck9ic2VydmVyKSB7XG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXJbcnhTdWJzY3JpYmVyU3ltYm9sXSkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlclN5bWJvbF0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5leHRPck9ic2VydmVyICYmICFlcnJvciAmJiAhY29tcGxldGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKGVtcHR5T2JzZXJ2ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFN1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b1N1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBjYW5SZXBvcnRFcnJvcihvYnNlcnZlcikge1xuICAgIHdoaWxlIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgX2EgPSBvYnNlcnZlciwgY2xvc2VkXzEgPSBfYS5jbG9zZWQsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb24sIGlzU3RvcHBlZCA9IF9hLmlzU3RvcHBlZDtcbiAgICAgICAgaWYgKGNsb3NlZF8xIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uIGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhblJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xudmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGwoKSB7XG4gICAgICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9ICdvYmplY3QgdW5zdWJzY3JpYmVkJztcbiAgICAgICAgdGhpcy5uYW1lID0gJ09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIE9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbC5wcm90b3R5cGUgPSAvKkBfX1BVUkVfXyovIE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgICByZXR1cm4gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsO1xufSkoKTtcbmV4cG9ydCB2YXIgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgPSBPYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYmplY3RVbnN1YnNjcmliZWRFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmlwdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJzY3JpcHRpb24nO1xudmFyIFN1YmplY3RTdWJzY3JpcHRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3ViamVjdFN1YnNjcmlwdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJqZWN0U3Vic2NyaXB0aW9uKHN1YmplY3QsIHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3ViamVjdCA9IHN1YmplY3Q7XG4gICAgICAgIF90aGlzLnN1YnNjcmliZXIgPSBzdWJzY3JpYmVyO1xuICAgICAgICBfdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdWJqZWN0U3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICB2YXIgc3ViamVjdCA9IHRoaXMuc3ViamVjdDtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHN1YmplY3Qub2JzZXJ2ZXJzO1xuICAgICAgICB0aGlzLnN1YmplY3QgPSBudWxsO1xuICAgICAgICBpZiAoIW9ic2VydmVycyB8fCBvYnNlcnZlcnMubGVuZ3RoID09PSAwIHx8IHN1YmplY3QuaXNTdG9wcGVkIHx8IHN1YmplY3QuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1YnNjcmliZXJJbmRleCA9IG9ic2VydmVycy5pbmRleE9mKHRoaXMuc3Vic2NyaWJlcik7XG4gICAgICAgIGlmIChzdWJzY3JpYmVySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBvYnNlcnZlcnMuc3BsaWNlKHN1YnNjcmliZXJJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTdWJqZWN0U3Vic2NyaXB0aW9uO1xufShTdWJzY3JpcHRpb24pKTtcbmV4cG9ydCB7IFN1YmplY3RTdWJzY3JpcHRpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YmplY3RTdWJzY3JpcHRpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9PYnNlcnZhYmxlLF9TdWJzY3JpYmVyLF9TdWJzY3JpcHRpb24sX3V0aWxfT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IsX1N1YmplY3RTdWJzY3JpcHRpb24sX2ludGVybmFsX3N5bWJvbF9yeFN1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuL09ic2VydmFibGUnO1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBPYmplY3RVbnN1YnNjcmliZWRFcnJvciB9IGZyb20gJy4vdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvcic7XG5pbXBvcnQgeyBTdWJqZWN0U3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJqZWN0U3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IHJ4U3Vic2NyaWJlciBhcyByeFN1YnNjcmliZXJTeW1ib2wgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvcnhTdWJzY3JpYmVyJztcbnZhciBTdWJqZWN0U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJqZWN0U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJqZWN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gU3ViamVjdFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IFN1YmplY3RTdWJzY3JpYmVyIH07XG52YXIgU3ViamVjdCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3QoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9ic2VydmVycyA9IFtdO1xuICAgICAgICBfdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICAgIF90aGlzLnRocm93bkVycm9yID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdWJqZWN0LnByb3RvdHlwZVtyeFN1YnNjcmliZXJTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFN1YmplY3RTdWJzY3JpYmVyKHRoaXMpO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uIChvcGVyYXRvcikge1xuICAgICAgICB2YXIgc3ViamVjdCA9IG5ldyBBbm9ueW1vdXNTdWJqZWN0KHRoaXMsIHRoaXMpO1xuICAgICAgICBzdWJqZWN0Lm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIHJldHVybiBzdWJqZWN0O1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNvcHkgPSBvYnNlcnZlcnMuc2xpY2UoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb3B5W2ldLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50aHJvd25FcnJvciA9IGVycjtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb3B5W2ldLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIGNvcHkgPSBvYnNlcnZlcnMuc2xpY2UoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29weVtpXS5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3RyeVN1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHRoaXMudGhyb3duRXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goc3Vic2NyaWJlcik7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN1YmplY3RTdWJzY3JpcHRpb24odGhpcywgc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmFzT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgU3ViamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gbmV3IEFub255bW91c1N1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3ViamVjdDtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IHsgU3ViamVjdCB9O1xudmFyIEFub255bW91c1N1YmplY3QgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQW5vbnltb3VzU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbm9ueW1vdXNTdWJqZWN0KGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgX3RoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uLm5leHQpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uLmVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoZGVzdGluYXRpb24gJiYgZGVzdGluYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBbm9ueW1vdXNTdWJqZWN0O1xufShTdWJqZWN0KSk7XG5leHBvcnQgeyBBbm9ueW1vdXNTdWJqZWN0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJqZWN0LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3ViamVjdCxfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJy4vU3ViamVjdCc7XG5pbXBvcnQgeyBPYmplY3RVbnN1YnNjcmliZWRFcnJvciB9IGZyb20gJy4vdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvcic7XG52YXIgQmVoYXZpb3JTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEJlaGF2aW9yU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCZWhhdmlvclN1YmplY3QoX3ZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl92YWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdXBlci5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uICYmICFzdWJzY3JpcHRpb24uY2xvc2VkKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodGhpcy5fdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy50aHJvd25FcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLCB0aGlzLl92YWx1ZSA9IHZhbHVlKTtcbiAgICB9O1xuICAgIHJldHVybiBCZWhhdmlvclN1YmplY3Q7XG59KFN1YmplY3QpKTtcbmV4cG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmVoYXZpb3JTdWJqZWN0LmpzLm1hcFxuIiwiaW1wb3J0IHsgUHJvZHVjdCB9IGZyb20gXCIuL3Byb2R1Y3QubW9kZWxcIjtcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgKiBhcyBscyBmcm9tIFwibG9jYWwtc3RvcmFnZVwiO1xuZXhwb3J0IGludGVyZmFjZSBDYXJ0SXRlbSB7XG4gIGxpc3Q6IFByb2R1Y3RbXTtcbiAgdG90YWxJdGVtOiBudW1iZXI7XG4gIHRvdGFsQW1vdW50OiBudW1iZXI7XG59XG5leHBvcnQgY2xhc3MgQ2FydCB7XG4gIHByaXZhdGUgbGlzdDogUHJvZHVjdFtdID0gbHMuZ2V0PFByb2R1Y3RbXT4oXCJjYXJ0LWl0ZW1zXCIpO1xuICBwcml2YXRlIHRvdGFsSXRlbTogbnVtYmVyID0gbHMuZ2V0PG51bWJlcj4oXCJjYXJ0LWNvdW50XCIpO1xuICBwcml2YXRlIGNhcnRJdGVtOiBCZWhhdmlvclN1YmplY3Q8Q2FydEl0ZW0+O1xuICBwcml2YXRlIHRvdGFsQW1vdW50OiBudW1iZXIgPSBscy5nZXQ8bnVtYmVyPihcImNhcnQtYW1vdW50XCIpO1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmluaXRMaXN0SXRlbXMoKTtcbiAgICB0aGlzLmluaXRUb3RhbEl0ZW0oKTtcbiAgICB0aGlzLmNhcnRJdGVtID0gbmV3IEJlaGF2aW9yU3ViamVjdDxDYXJ0SXRlbT4odGhpcy5fcHJlcGFyZUFuZEJyb2FkY2FzdCgpKTtcbiAgfVxuICBwcml2YXRlIF9wcmVwYXJlQW5kQnJvYWRjYXN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICBsaXN0OiB0aGlzLmxpc3QsXG4gICAgICB0b3RhbEl0ZW06IHRoaXMudG90YWxJdGVtLFxuICAgICAgdG90YWxBbW91bnQ6IHRoaXMudG90YWxBbW91bnQsXG4gICAgfTtcbiAgfVxuICBpbml0TGlzdEl0ZW1zKCkge1xuICAgIGlmICh0aGlzLmxpc3QgPT09IG51bGwpIHtcbiAgICAgIGxzLnNldDxQcm9kdWN0W10+KFwiY2FydC1pdGVtc1wiLCBbXSk7XG4gICAgICB0aGlzLmxpc3QgPSBbXTtcbiAgICB9XG4gIH1cblxuICBpbml0VG90YWxJdGVtKCkge1xuICAgIGlmICh0aGlzLnRvdGFsSXRlbSA9PT0gbnVsbCkge1xuICAgICAgbHMuc2V0PG51bWJlcj4oXCJjYXJ0LWNvdW50XCIsIDApO1xuICAgICAgdGhpcy50b3RhbEl0ZW0gPSAwO1xuICAgIH1cbiAgfVxuICBpbml0VG90YWxBbW91bnQoKSB7XG4gICAgaWYgKHRoaXMudG90YWxBbW91bnQgPT09IG51bGwpIHtcbiAgICAgIGxzLnNldDxudW1iZXI+KFwiY2FydC1hbW91bnRcIiwgMCk7XG4gICAgICB0aGlzLnRvdGFsQW1vdW50ID0gMDtcbiAgICB9XG4gIH1cbiAgZ2V0IG9ic2VydmFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FydEl0ZW0uYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuICB0b3RhbCgpIHtcbiAgICBsZXQgdHRsID0gMDtcbiAgICBsZXQgY291bnQgPSAwO1xuXG4gICAgdGhpcy5saXN0LmZvckVhY2goKHgpID0+IHtcbiAgICAgIHR0bCA9IHR0bCArIHgucXVhbnRpdHkgKiB4LnByaWNlO1xuICAgICAgY291bnQgPSBjb3VudCArIHgucXVhbnRpdHk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnRvdGFsSXRlbSA9IGNvdW50O1xuICAgIHRoaXMudG90YWxBbW91bnQgPSB0dGw7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW06IFByb2R1Y3QpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMubGlzdC5maW5kSW5kZXgoKHgpID0+IHguc2t1ID09PSBpdGVtLnNrdSk7XG4gICAgaW5kZXggPT09IC0xID8gdGhpcy5saXN0LnB1c2goaXRlbSkgOiB0aGlzLmluY3JlYXNlUXVhbnRpdHkoaW5kZXgpO1xuXG4gICAgdGhpcy5zYXZlKCk7XG4gIH1cblxuICBpbmNyZWFzZVF1YW50aXR5KGluZGV4OiBudW1iZXIsIHNhdmU6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMubGlzdFtpbmRleF0ucXVhbnRpdHkrKztcblxuICAgIGlmIChzYXZlKSB0aGlzLnNhdmUoKTtcbiAgfVxuICBkZWNyZWFzZVF1YW50aXR5KGluZGV4OiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5saXN0W2luZGV4XS5xdWFudGl0eSA+IDApIHRoaXMubGlzdFtpbmRleF0ucXVhbnRpdHktLTtcbiAgICB0aGlzLnNhdmUoKTtcbiAgfVxuXG4gIHJlbW92ZUl0ZW0oc2t1OiBzdHJpbmcpIHtcbiAgICB0aGlzLmxpc3QgPSB0aGlzLmxpc3QuZmlsdGVyKCh4OiBQcm9kdWN0KSA9PiB7XG4gICAgICByZXR1cm4geC5za3UgIT09IHNrdTtcbiAgICB9KTtcbiAgICB0aGlzLnNhdmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2F2ZSgpIHtcbiAgICB0aGlzLnRvdGFsKCk7XG4gICAgbHMuc2V0PFByb2R1Y3RbXT4oXCJjYXJ0LWl0ZW1zXCIsIHRoaXMubGlzdCk7XG4gICAgbHMuc2V0PG51bWJlcj4oXCJjYXJ0LWNvdW50XCIsIHRoaXMudG90YWxJdGVtKTtcbiAgICBscy5zZXQ8bnVtYmVyPihcImNhcnQtYW1vdW50XCIsIHRoaXMudG90YWxBbW91bnQpO1xuICAgIHRoaXMuY2FydEl0ZW0ubmV4dCh0aGlzLl9wcmVwYXJlQW5kQnJvYWRjYXN0KCkpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgUHJvZHVjdHtcbiAgICBpZDpudW1iZXJcbiAgICBza3U6c3RyaW5nXG4gICAgaW1hZ2U/OnN0cmluZ1xuICAgIG5hbWU6c3RyaW5nXG4gICAgcHJpY2U6bnVtYmVyXG4gICAgcXVhbnRpdHk6bnVtYmVyXG5cbn0iLCJpbXBvcnQge0NhcnQsIENhcnRJdGVtfSBmcm9tICcuL21vZGVscy9jYXJ0Lm1vZGVsJztcbmltcG9ydCB7UHJvZHVjdH0gZnJvbSBcIi4vbW9kZWxzL3Byb2R1Y3QubW9kZWxcIjtcbmltcG9ydCB7YW5pbWF0ZUFkZFRvQ2FydH0gZnJvbSBcIi4vZnVuY3Rpb25zL2FuaW1hdGVDYXJ0XCI7XG5pbXBvcnQge1NlbGVjdG9yfSBmcm9tIFwiLi9tb2RlbHMvYXBwLm1vZGVsXCI7XG5pbXBvcnQge0JlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZX0gZnJvbSBcInJ4anNcIjtcblxuZGVjbGFyZSBsZXQgUFJPRFVDVF9WQVJJQVRJT05TOiBhbnlbXTtcbmRlY2xhcmUgbGV0IGNhcnRKc0NvbmZpZzogU2VsZWN0b3I7XG5kZWNsYXJlIHZhciAkOiBhbnk7XG5cbmV4cG9ydCBjbGFzcyBWYXJpYXRpb25FdmVudHMge1xuICAgIHZhcmlhdGlvbkxpc3Q6IGFueSA9IHt9O1xuICAgIHByb2R1Y3RJZDogbnVtYmVyO1xuICAgIHByaXZhdGUgdmFyaWF0aW9uczogQmVoYXZpb3JTdWJqZWN0PGFueVtdPiA9IG5ldyBCZWhhdmlvclN1YmplY3QoW10pO1xuICAgIHRvdGFsVmFyaWF0aW9uczogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuVmFyaWF0aW9uQ2xpY2soKTtcbiAgICB9XG5cbiAgICBkZXRhY2hFdmVudHMoKSB7XG4gICAgICAgICQoXCJib2R5XCIpLm9mZihcImNsaWNrXCIpO1xuICAgIH1cblxuICAgIGdldCBTZWxlY3RlZFZhcmlhdGlvbigpOiBPYnNlcnZhYmxlPGFueVtdPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhcmlhdGlvbnMuYXNPYnNlcnZhYmxlKCk7XG4gICAgfVxuXG4gICAgbGlzdGVuVmFyaWF0aW9uQ2xpY2soKSB7XG4gICAgICAgIGNvbnN0ICRwcm9kdWN0ID0gJCgnLnByb2R1Y3QtdmFyaWF0aW9ucycpO1xuICAgICAgICB0aGlzLnRvdGFsVmFyaWF0aW9ucyA9ICRwcm9kdWN0LmRhdGEoJ3ZhcmlhdGlvbnMnKTtcbiAgICAgICAgdGhpcy5wcm9kdWN0SWQgPSAkcHJvZHVjdC5kYXRhKCdwcm9kdWN0Jyk7XG4gICAgICAgICQoJy5vcHRpb25zLWl0ZW0gPiBkaXYnKS5vbignY2xpY2snLCAoZTogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9ICQodGFyZ2V0LnBhcmVudCgpKTtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSAkKHBhcmVudC5wYXJlbnQoKSkuZGF0YSgnYXR0cmlidXRlJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZVZhbHVlID0gdGFyZ2V0LmRhdGEoJ3ZhbHVlJyk7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRDbGFzcyA9IHBhcmVudC5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMV07XG4gICAgICAgICAgICBpZih0YXJnZXQuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcbiAgICAgICAgICAgICAgICAvL3RhcmdldC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAvLyB0aGlzLnZhcmlhdGlvbkxpc3QgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoJy5vcHRpb25zLWl0ZW0uJyArIHBhcmVudENsYXNzICsgJyA+IGRpdicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRhcmdldC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLnZhcmlhdGlvbkxpc3RbYXR0cmlidXRlTmFtZV0gPSBhdHRyaWJ1dGVWYWx1ZTtcbiAgICAgICAgICAgIGxldCBhcnJheSA9IE9iamVjdC5rZXlzKHRoaXMudmFyaWF0aW9uTGlzdCkubWFwKGl0ZW0gPT4gdGhpcy52YXJpYXRpb25MaXN0W2l0ZW1dKTtcbiAgICAgICAgICAgIGlmIChhcnJheS5sZW5ndGggPT0gdGhpcy50b3RhbFZhcmlhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAkKCcja29kQ21zLWxvYWRpbmcnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgICAgIHVybDogXCIvZW4vY29tbWVyY2UvcHJvZHVjdC92YXJpYXRpb24/aWQ9XCIgKyB0aGlzLnByb2R1Y3RJZCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy52YXJpYXRpb25MaXN0LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiAocmVzOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNrb2RDbXMtbG9hZGluZycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFyaWF0aW9ucy5uZXh0KHJlcylcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENhcnQsIENhcnRJdGVtIH0gZnJvbSAnLi9tb2RlbHMvY2FydC5tb2RlbCc7XG5pbXBvcnQgeyBQcm9kdWN0IH0gZnJvbSBcIi4vbW9kZWxzL3Byb2R1Y3QubW9kZWxcIjtcbmltcG9ydCB7IGFuaW1hdGVBZGRUb0NhcnQgfSBmcm9tIFwiLi9mdW5jdGlvbnMvYW5pbWF0ZUNhcnRcIjtcbmltcG9ydCB7IFNlbGVjdG9yIH0gZnJvbSBcIi4vbW9kZWxzL2FwcC5tb2RlbFwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQge1ZhcmlhdGlvbkV2ZW50c30gZnJvbSBcIi4vdmFyaWF0aW9uRXZlbnRcIjtcblxuZGVjbGFyZSBsZXQgY2FydEpzQ29uZmlnOiBTZWxlY3RvcjtcbmRlY2xhcmUgdmFyICQ6IGFueTtcbmV4cG9ydCBjbGFzcyBDYXJ0RXZlbnRzIHtcbiAgcHJvZHVjdDphbnlcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjYXJ0OiBDYXJ0ID0gbmV3IENhcnQoKSxcbiAgICBwcml2YXRlIHNlbGVjdG9yOiBTZWxlY3RvciA9IGNhcnRKc0NvbmZpZyxcbiAgICBwcml2YXRlIHZhcmlhdGlvbkV2ZW50ID0gbmV3IFZhcmlhdGlvbkV2ZW50cygpXG4gICkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZUFkZFRvQ2FydEJ1dHRvbigpO1xuICAgIHZhcmlhdGlvbkV2ZW50LlNlbGVjdGVkVmFyaWF0aW9uLnN1YnNjcmliZSgoZGF0YTphbnkpPT57XG4gICAgICBpZihkYXRhLmxlbmd0aDwxKSByZXR1cm4gO1xuICAgICAgaWYoZGF0YS5zdG9jaz4wKXtcbiAgICAgICAgJCgnLicrdGhpcy5zZWxlY3Rvci5wcmljZVNlbGVjdG9yKS5odG1sKGRhdGEuZm9ybWF0dGVkUHJpY2UpO1xuICAgICAgICB0aGlzLnByb2R1Y3QgPSBkYXRhO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGdldCBjYXJ0SXRlbSgpOk9ic2VydmFibGU8Q2FydEl0ZW0+IHtcbiAgICByZXR1cm4gdGhpcy5jYXJ0Lm9ic2VydmFibGU7XG4gIH1cbiAgZGV0YWNoRXZlbnRzKCl7XG4gICAgJChcImJvZHlcIikub2ZmKFwiY2xpY2tcIik7XG4gIH1cbiAgbGlzdGVuQWRkVG9DYXJ0QnV0dG9uKGV2ZW50OiBhbnkpIHtcbiAgICBsZXQgbmFtZSwgcHJpY2UsIHNrdSwgaWQ7XG4gICAgY29uc3QgdGFyZ2V0ID0gJChldmVudC50YXJnZXQpO1xuICAgIGNvbnN0IHBhcmVudCA9IHRhcmdldC5wYXJlbnRzKFwiLml0ZW1cIik7XG4gICAgaWYodGhpcy5wcm9kdWN0PT09bnVsbCl7XG4gICAgICAgIG5hbWUgPSBwYXJlbnQuZmluZChcIi5pdGVtLXRpdGxlXCIpLnRleHQoKTtcbiAgICAgICBwcmljZSA9IHRhcmdldC5kYXRhKCdwcmljZScpO1xuICAgICAgIGlkPXRhcmdldC5kYXRhKCdpZCcpO1xuICAgICAgIHNrdSA9IHRhcmdldC5kYXRhKCdza3UnKTtcbiAgICB9ZWxzZXtcbiAgICAgICBuYW1lID0gdGhpcy5wcm9kdWN0LnRpdGxlXG4gICAgICAgcHJpY2UgPSB0aGlzLnByb2R1Y3QucHJpY2U7XG4gICAgICAgaWQgPSB0aGlzLnByb2R1Y3QuaWQ7XG4gICAgICAgc2t1ID0gdGhpcy5wcm9kdWN0LnNrdTtcbiAgICB9XG5cbiAgICBjb25zdCBpbWcgPSBwYXJlbnRcbiAgICAgIC5maW5kKFwiaW1nXCIpXG4gICAgICAuZXEoMClcbiAgICAgIC5hdHRyKFwic3JjXCIpO1xuXG4gICAgY29uc3QgaXRlbSA9IG5ldyBQcm9kdWN0KCk7XG4gICAgaXRlbS5pZCA9IGlkO1xuICAgIGl0ZW0uc2t1ID0gc2t1Pz9pZDtcbiAgICBpdGVtLm5hbWUgPSBuYW1lO1xuICAgIGl0ZW0ucHJpY2UgPXByaWNlO1xuICAgIGl0ZW0ucXVhbnRpdHkgPSAxO1xuICAgIGl0ZW0uaW1hZ2UgPSBpbWc7XG4gICAgdGhpcy5jYXJ0LmFkZEl0ZW0oaXRlbSk7XG4gICAgYW5pbWF0ZUFkZFRvQ2FydCh0YXJnZXQsIHRoaXMuc2VsZWN0b3IudG90YWxDYXJ0SXRlbVNlbGVjdG9yKTtcbiAgfVxuXG4gIGxpc3RlblF1YW50aXR5QnV0dG9uKGV2ZW50OiBhbnkpIHtcbiAgICBjb25zdCBpbmRleCA9ICQoZXZlbnQudGFyZ2V0KS5kYXRhKFwiaW5kZXhcIik7XG4gICAgY29uc3QgdHlwZSA9ICQoZXZlbnQudGFyZ2V0KS5kYXRhKFwidHlwZVwiKTtcbiAgICB0eXBlID09PSBcImluY1wiXG4gICAgICA/IHRoaXMuY2FydC5pbmNyZWFzZVF1YW50aXR5KGluZGV4LCB0cnVlKVxuICAgICAgOiB0aGlzLmNhcnQuZGVjcmVhc2VRdWFudGl0eShpbmRleCk7XG4gIH1cblxuICBsaXN0ZW5SZW1vdmVCdXR0b24oZXZlbnQ6IGFueSkge1xuICAgIGNvbnN0IGluZGV4ID0gJChldmVudC50YXJnZXQpLmRhdGEoXCJpbmRleFwiKTtcbiAgICB0aGlzLmNhcnQucmVtb3ZlSXRlbShpbmRleCk7XG4gIH1cblxuICB0cmlnZ2VyQWRkVG9DYXJ0QnV0dG9uKCl7XG4gICAgJChcIi5cIiArIHRoaXMuc2VsZWN0b3IuYWRkVG9DYXJ0QnV0dG9uU2VsZWN0b3IpLmNsaWNrKChldmVudDphbnkpID0+XG4gICAgdGhpcy5saXN0ZW5BZGRUb0NhcnRCdXR0b24oZXZlbnQpXG4gICk7XG4gIH1cbiAgIHRyaWdnZXJEeW5hbWljQnV0dG9uKCkge1xuICAgIGNvbnN0IGluY0RlY0J1dHRvbiA9ICQoXCIuaW5jLWRlYy1idXR0b25cIik7XG4gICAgaW5jRGVjQnV0dG9uLm9uKFwiY2xpY2tcIiwgKGV2ZW50OmFueSkgPT5cbiAgICAgIHRoaXMubGlzdGVuUXVhbnRpdHlCdXR0b24oZXZlbnQpXG4gICAgKTtcbiAgICAkKFwiLmNhcnQtcmVtb3ZlLWl0ZW0tYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgKGV2ZW50OmFueSkgPT5cbiAgICAgIHRoaXMubGlzdGVuUmVtb3ZlQnV0dG9uKGV2ZW50KVxuICAgICk7XG4gIH1cbiAgaW5pdGlhbGl6ZUFkZFRvQ2FydEJ1dHRvbigpe1xuICAgIGNvbnN0IGJ1dHRvbiAgPSAkKFwiLlwiICsgdGhpcy5zZWxlY3Rvci5hZGRUb0NhcnRCdXR0b25TZWxlY3Rvcik7XG4gICAgYnV0dG9uLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgYnV0dG9uLmNsaWNrKChldmVudDphbnkpID0+XG4gICAgICAgIHRoaXMubGlzdGVuQWRkVG9DYXJ0QnV0dG9uKGV2ZW50KVxuICAgICk7XG4gIH1cbn1cbiIsImRlY2xhcmUgdmFyICQ6YW55XG5leHBvcnQgZnVuY3Rpb24gYW5pbWF0ZUFkZFRvQ2FydCh0YXJnZXQ6YW55LCBjYXJkSWNvblNlbGVjdG9yOnN0cmluZyl7XG5cbiAgICBjb25zdCBjYXJ0OmFueSA9ICQoXCIuXCIrY2FyZEljb25TZWxlY3Rvcik7XG4gICAgY29uc3QgaW1ndG9kcmFnID0gJCh0YXJnZXQpLnBhcmVudHMoJy5pdGVtJykuZmluZChcImltZ1wiKS5lcSgwKTtcblxuICAgIFxuICAgIGlmIChpbWd0b2RyYWcpIHtcbiAgICAgICAgY29uc3QgaW1nY2xvbmUgPSBpbWd0b2RyYWcuY2xvbmUoKVxuICAgICAgICAgICAgLm9mZnNldCh7XG4gICAgICAgICAgICB0b3A6IGltZ3RvZHJhZy5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICBsZWZ0OiBpbWd0b2RyYWcub2Zmc2V0KCkubGVmdFxuICAgICAgICB9KVxuICAgICAgICAgICAgLmNzcyh7XG4gICAgICAgICAgICAnb3BhY2l0eSc6ICcwLjUnLFxuICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcxNTBweCcsXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogJzE1MHB4JyxcbiAgICAgICAgICAgICAgICAnei1pbmRleCc6ICcxMDAnXG4gICAgICAgIH0pXG4gICAgICAgICAgICAuYXBwZW5kVG8oJCgnYm9keScpKVxuICAgICAgICAgICAgLmFuaW1hdGUoe1xuICAgICAgICAgICAgJ3RvcCc6IGNhcnQub2Zmc2V0KCkudG9wICsgMTAsXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBjYXJ0Lm9mZnNldCgpLmxlZnQgKyAxMCxcbiAgICAgICAgICAgICAgICAnd2lkdGgnOiA3NSxcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogNzVcbiAgICAgICAgfSwgMTAwMCwgJ2Vhc2VJbk91dEV4cG8nKTtcbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoICgpPT4ge1xuICAgICAgICAgICAgY2FydC5lZmZlY3QoXCJzaGFrZVwiLCB7XG4gICAgICAgICAgICAgICAgdGltZXM6IDJcbiAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgIH0sIDE1MDApO1xuXG4gICAgICAgIGltZ2Nsb25lLmFuaW1hdGUoe1xuICAgICAgICAgICAgJ3dpZHRoJzogMCxcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogMFxuICAgICAgICB9KTtcbiAgICB9XG59IiwiIGZ1bmN0aW9uIGNhcEZpcnN0KHN0cmluZzpzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xufVxuXG4gIGZ1bmN0aW9uIGdldFJhbmRvbUludChtaW46bnVtYmVyLCBtYXg6bnVtYmVyKSB7XG4gIFx0cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlTmFtZSgpe1xuXHR2YXIgbmFtZTEgPSBbXCJhYmFuZG9uZWRcIixcImFibGVcIixcImFic29sdXRlXCIsXCJhZG9yYWJsZVwiLFwiYWR2ZW50dXJvdXNcIl07XG5cblx0dmFyIG5hbWUyID0gW1wicGVvcGxlXCIsXCJyZXNvbHZlXCIsXCJydWJcIixcInNpbGx5XCIsXCJzbWlsZVwiXTtcblxuXHR2YXIgbmFtZSA9IGNhcEZpcnN0KG5hbWUxW2dldFJhbmRvbUludCgwLCBuYW1lMS5sZW5ndGggKyAxKV0pICsgJyAnICsgY2FwRmlyc3QobmFtZTJbZ2V0UmFuZG9tSW50KDAsIG5hbWUyLmxlbmd0aCArIDEpXSk7XG5cdHJldHVybiBuYW1lO1xuXG59IiwiaW1wb3J0IHsgQ2FydEl0ZW0gfSBmcm9tIFwiLi9tb2RlbHMvY2FydC5tb2RlbFwiO1xuaW1wb3J0IHsgU2VsZWN0b3IgfSBmcm9tIFwiLi9tb2RlbHMvYXBwLm1vZGVsXCI7XG5pbXBvcnQgeyBQcm9kdWN0IH0gZnJvbSBcIi4vbW9kZWxzL3Byb2R1Y3QubW9kZWxcIjtcbmltcG9ydCB7IENhcnRFdmVudHMgfSBmcm9tIFwiLi9ldmVudHNcIjtcbmltcG9ydCB7IGdlbmVyYXRlTmFtZSB9IGZyb20gXCIuL2Z1bmN0aW9ucy9yYW5kb21OYW1lc1wiO1xuZGVjbGFyZSB2YXIgJDogYW55O1xuZGVjbGFyZSBsZXQgY2FydEpzQ29uZmlnOiBTZWxlY3RvcjtcbmV4cG9ydCBjbGFzcyBSZW5kZXIge1xuICBwcml2YXRlIGxpc3RFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGNhcnRFdmVudHM6IENhcnRFdmVudHMgPSBuZXcgQ2FydEV2ZW50cygpLFxuXG4gICAgcHJpdmF0ZSBzZWxlY3RvcjogU2VsZWN0b3IgPSBjYXJ0SnNDb25maWdcbiAgKSB7XG4gICAgdGhpcy5saXN0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdG9yLmxpc3RTZWxlY3Rvcik7XG4gICAgXG4gICAgdGhpcy5yZW5kZXJTYW1wbGVQcm9kdWN0cygzKTtcbiAgfVxuXG4gIHJlbmRlcihjYXJ0OiBDYXJ0SXRlbSkge1xuICB0aGlzLmNhcnRFdmVudHMuZGV0YWNoRXZlbnRzKCk7XG4gICAgICB0aGlzLnJlbmRlckNvdW50SXRlbXMoY2FydC50b3RhbEl0ZW0pO1xuICAgIHRoaXMucmVuZGVyU3VtbWFyeUxpc3QoY2FydCk7XG4gICAgdGhpcy5fZHJhd1RhYmxlKGNhcnQubGlzdCk7XG4gICBcbiAgICB0aGlzLmNhcnRFdmVudHMudHJpZ2dlckR5bmFtaWNCdXR0b24oKTtcbiAgICB0aGlzLmRyb3BEb3duQ2FydCgpO1xuICB9XG5wcml2YXRlIGRyb3BEb3duQ2FydCgpe1xuICAgIGNvbnN0IGJ1dHRvbiA9ICQoJy5jYXJ0LXRvZ2dsZScpO1xuICAgIGJ1dHRvbi5vbignY2xpY2snLChlOmFueSk9PntcbiAgICAgIGNvbnN0IGl0ZW0gPSAkKFwiLmRyb3Bkb3duLWNhcnRcIik7XG4gICAgICBpdGVtLmZhZGVJbignc2xvdycpO1xuICAgIH0pO1xufVxuICBwcml2YXRlIHJlbmRlclN1bW1hcnlMaXN0KGNhcnQ6IENhcnRJdGVtKSB7XG4gICAgbGV0IGh0bWwgPSBgYDtcbiAgICBodG1sKz1gPGxpIGNsYXNzPVwiZHJvcGRvd24tY2FydC1oZWFkZXJcIj48YnV0dG9uIGNsYXNzPVwiY2xvc2UtY2FydC1idXR0b25cIj5DbG9zZTwvYnV0dG9uPjwvbGk+YDtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY2FydC5saXN0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaHRtbCArPSBgXG4gICAgICAgICA8bGk+XG4gICAgICAgICA8c3BhbiBjbGFzcz1cIml0ZW1cIj5cbiAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpdGVtLWxlZnRcIj5cbiAgICAgICAgICAgICAgIDxpbWcgc3R5bGU9XCJ3aWR0aDozMHB4OyBoZWlnaHQ6MjBweFwiIHNyYz1cIiR7XG4gICAgICAgICAgICAgICAgIGNhcnQubGlzdFtpbmRleF0uaW1hZ2VcbiAgICAgICAgICAgICAgIH1cIiBhbHQ9XCJjYXJ0X2l0ZW1cIiAvPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpdGVtLWluZm9cIj5cbiAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2NhcnQubGlzdFtpbmRleF0ubmFtZX0gPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS10eXBlPVwiaW5jXCIgZGF0YS1pbmRleD1cIiR7aW5kZXh9XCIgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzIGluYy1kZWMtYnV0dG9uXCI+KzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICR7Y2FydC5saXN0W2luZGV4XS5xdWFudGl0eX1cbiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtdHlwZT1cImRlY1wiIGRhdGEtaW5kZXg9XCIke2luZGV4fVwiIGNsYXNzPVwiYnRuIGJ0bi14cyBidG4tZGFuZ2VyIGluYy1kZWMtYnV0dG9uXCI+LTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICA8c3Bhbj4kJHtjYXJ0Lmxpc3RbaW5kZXhdLnByaWNlICpcbiAgICAgICAgICAgICAgICAgICAgIGNhcnQubGlzdFtpbmRleF0ucXVhbnRpdHl9PC9zcGFuPlxuICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaXRlbS1yaWdodFwiPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiAgZGF0YS1pbmRleD1cIiR7XG4gICAgICAgICAgICAgICAgIGNhcnQubGlzdFtpbmRleF0uc2t1XG4gICAgICAgICAgICAgICB9XCIgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1kYW5nZXIgcHVsbC1yaWdodCBjYXJ0LXJlbW92ZS1pdGVtLWJ1dHRvblwiPng8L2J1dHRvbj5cbiAgICAgICAgICAgPC9zcGFuPlxuICAgICAgIDwvc3Bhbj5cbiAgICAgPC9saT5cbiAgICAgICAgIGA7XG4gICAgfVxuXG4gICAgaHRtbCArPSBgXG4gICAgICA8bGkgY2xhc3M9XCJkaXZpZGVyXCI+PC9saT5cbiAgPGxpIGNsYXNzPVwiZHJvcGRvd24tY2FydC1mb290ZXJcIj5cbiAgPHNwYW4+IFRvdGFsOiAkJHtjYXJ0LnRvdGFsQW1vdW50fTwvc3Bhbj5cbiAgPGEgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIGhyZWY9XCIvY2FydC5odG1sXCI+VmlldyBDYXJ0PC9hPlxuICA8L2xpPlxuICAgICAgYDtcbiAgICAkKFwiLlwiICsgdGhpcy5zZWxlY3Rvci5zdW1tYXJ5U2VsZWN0b3IpLmh0bWwoaHRtbCk7XG4gICAgJCgnLmNsb3NlLWNhcnQtYnV0dG9uJykuY2xpY2soKCk9PntcbiAgICAgJCgnLmRyb3Bkb3duLWNhcnQnKS5mYWRlT3V0KFwic2xvd1wiKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2RyYXdUYWJsZShpdGVtczogUHJvZHVjdFtdKSB7XG4gICAgaWYgKHRoaXMubGlzdEVsZW1lbnQpIHtcbiAgICAgIHRoaXMuY2xlYXJMaXN0KCk7XG4gICAgICAkKFwiI1wiICsgdGhpcy5zZWxlY3Rvci5saXN0U2VsZWN0b3IpLmh0bWwoYFxuICAgICAgPHRhYmxlIGNsYXNzPVwidGFibGVcIj5cbiAgICAgICAgPHRyPlxuICAgICAgICA8dGg+TmFtZTwvdGg+XG4gICAgICAgIDx0aD5RdWFudGl0eTwvdGg+XG4gICAgICAgIDx0aD5QcmljZTwvdGg+XG4gICAgICAgIDx0aD5BY3Rpb248L3RoPlxuICAgIDwvdHI+XG4gICAgPHRib2R5IGlkPSdjYXJ0LXRhYmxlLWJvZHknPlxuICAgIDwvdGJvZHk+XG4gICAgICA8L3RhYmxlPlxuICAgICAgYCk7XG5cbiAgICAgIGl0ZW1zLmZvckVhY2goKHg6IFByb2R1Y3QsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgJChcIiNjYXJ0LXRhYmxlLWJvZHlcIikuYXBwZW5kKGBcbiAgICAgIDx0cj5cbiAgICAgIDx0ZD4ke3gubmFtZX08L3RkPlxuICAgICAgPHRkPlxuICAgICAgPGJ1dHRvbiBkYXRhLXR5cGU9XCJpbmNcIiBkYXRhLWluZGV4PVwiJHtpbmRleH1cIiBjbGFzcz1cImJ0biBidG4tc3VjY2VzcyBpbmMtZGVjLWJ1dHRvblwiPis8L2J1dHRvbj5cbiAgICAgICR7eC5xdWFudGl0eX1cbiAgICAgIDxidXR0b24gZGF0YS10eXBlPVwiZGVjXCIgZGF0YS1pbmRleD1cIiR7aW5kZXh9XCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlciBpbmMtZGVjLWJ1dHRvblwiPi08L2J1dHRvbj5cbiAgICAgIDwvdGQ+XG4gICAgICA8dGQ+JHt4LnByaWNlICogeC5xdWFudGl0eX08L3RkPlxuICAgICAgPHRkIGlkPScke3guc2t1fS1hY3Rpb24nPlxuICAgICAgPGJ1dHRvbiBkYXRhLWluZGV4PVwiJHtcbiAgICAgICAgeC5za3VcbiAgICAgIH1cIiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSBjYXJ0LXJlbW92ZS1pdGVtLWJ1dHRvblwiPlJlbW92ZTwvYnV0dG9uPjwvdGQ+XG4gICAgICA8L3RyPlxuICAgICAgYCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBcblxuICBwcml2YXRlIGNsZWFyTGlzdCgpIHtcbiAgICB0aGlzLmxpc3RFbGVtZW50LmlubmVySFRNTCA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckNvdW50SXRlbXModG90YWw6IG51bWJlcikge1xuICAgICQoXCIuXCIgKyB0aGlzLnNlbGVjdG9yLnRvdGFsQ2FydEl0ZW1TZWxlY3RvcikuaHRtbCh0b3RhbC50b1N0cmluZygpKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2FtcGxlUHJvZHVjdHMobnVtYmVyT2ZQcm9kdWN0czogbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdG9yLnNhbXBsZVByb2R1Y3RTZWxlY3RvcikgcmV0dXJuO1xuXG4gICAgJChcIiNcIiArIHRoaXMuc2VsZWN0b3Iuc2FtcGxlUHJvZHVjdFNlbGVjdG9yKS5odG1sKFxuICAgICAgYDxkaXYgY2xhc3M9XCJyb3dcIiBpZD1cIml0ZW1zXCI+PC9kaXY+YFxuICAgICk7XG4gICAgbGV0IGh0bWw6IHN0cmluZyA9IFwiPGRpdiBjbGFzcz0nY29sLXNtLTEyJz48aDI+UHJvZHVjdHMgc2FtcGxlPC9oMj48L2Rpdj5cIjtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbnVtYmVyT2ZQcm9kdWN0czsgaW5kZXgrKykge1xuICAgICAgY29uc3QgcHJpY2UgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICsgMSkgKiAoaW5kZXggKyA1NjApKTtcbiAgICAgIGh0bWwgKz0gYFxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS00IGl0ZW1cIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICA8aW1nIHNyYz1cImh0dHBzOi8vcGljc3VtLnBob3Rvcy9pZC8ke2luZGV4ICtcbiAgICAgICAgMX0vMjUwLzE1MFwiIGNsYXNzPVwiY2FyZC1pbWctdG9wXCIgYWx0PVwiaHR0cHM6Ly9waWNzdW0ucGhvdG9zLzIwMC8zMDBcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgPGg1IGNsYXNzPVwiY2FyZC10aXRsZSBpdGVtLXRpdGxlXCI+JHtnZW5lcmF0ZU5hbWUoKX08L2g1PlxuICAgICAgICA8cD5QcmljZSA8c3BhbiBjbGFzcz1cIml0ZW0tcHJpY2VcIiBkYXRhLXByaWNlPVwiJHtwcmljZX1cIj4kICR7cHJpY2V9PC9zcGFuPjwvcD5cbiAgICAgICAgPHAgIGNsYXNzPVwiY2FyZC10ZXh0XCI+U29tZSBxdWljayBleGFtcGxlIHRleHQgdG8gYnVpbGQgb24gdGhlIGNhcmQgdGl0bGUgYW5kIG1ha2UgdXAgdGhlIGJ1bGsgb2YgdGhlIGNhcmQncyBjb250ZW50LjwvcD5cbiAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVwiJHtpbmRleH1cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSAke1xuICAgICAgICB0aGlzLnNlbGVjdG9yLmFkZFRvQ2FydEJ1dHRvblNlbGVjdG9yXG4gICAgICB9XCI+QWRkIHRvIENhcnQ8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG4gICAgJChcIiNpdGVtc1wiKS5odG1sKGh0bWwpO1xuICAgICQoXCIjaXRlbXNcIikuYXBwZW5kKGBcbiAgIFxuIFxuICAgIDx0ZXh0YXJlYSBzdHlsZT1cImJvcmRlcjogbm9uZTtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO1wiIGRpc2FibGVkIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcm93cz1cIjEwXCI+IFxuICAgPGRpdiBjbGFzcz1cIml0ZW1cIj4gLy8gY2xhc3MgaXRlbSBpcyByZXF1aXJlZC4gXG4gICAgICAgIDxpbWcgc3JjPVwiLi4uXCI+IC8vIGltZyB0YWcgaXMgcmVxdWlyZWRcbiAgICAgICAgPGg1IGNsYXNzPVwiaXRlbS10aXRsZVwiPlBST0RVQ1RfTkFNRTwvaDU+IC8vIGNsYXNzIGl0ZW0tdGl0bGUgaXMgcmVxdWlyZWRcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJpdGVtLXByaWNlXCIgZGF0YS1wcmljZT1cIlBST0RVQ1RfUFJJQ0VcIj5QUk9EVUNUX1BSSUNFPC9zcGFuPi8vIGNsYXNzIGl0ZW0tcHJpY2UgYW5kIGF0dHJpYnV0ZSBkYXRhLXByaWNlIGlzIHJlcXVpcmVkXG4gICAgICAgIDxidXR0b24gZGF0YS1pZD1cIlBST0RVQ1RfSURcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBhZGRUb0NhcnRCdG5cIj5BZGQgdG8gQ2FydDwvYnV0dG9uPiAvL2F0dHJpYnV0ZSBkYXRhLWlkIGlzIHJlcXVpcmVkLCBhZGRUb0NhcnRCdG4gaXMgYnV0dG9uICBzZWxlY3RvclxuICAgIDwvZGl2PjwvdGV4dGFyZWE+XG4gICAgXG4gICAgPHByZT48Y29kZT5cbiAgICBGb2xsb3dpbmcgY29uZmlnIG11c3QgZGVjbGVhcmUgYmVmb3JlIGNhcnQuanMgXG4gICBcbiAgICBjYXJ0SnNDb25maWcgPSB7XG4gICAgICBsaXN0U2VsZWN0b3I6J2l0ZW0tbGlzdCcsIC8vIEF0dHJpYnV0ZSB0eXBlIElEIC0gd2lsbCByZW5kZXIgY2FydCBpdGVtcyBpbnNpZGUgdGhpcyBub2RlXG4gICAgICBhZGRUb0NhcnRCdXR0b25TZWxlY3RvcjonYWRkVG9DYXJ0QnRuJywgLy93aWxsIHRyaWdnZXIgQWRkIHRvIENhcnQgYnV0dG9uXG4gICAgICB0b3RhbENhcnRJdGVtU2VsZWN0b3I6J2NhcnQtdG90YWwtaXRlbXMnLCAvLyB3aWxsIHJlbmRlciBudW1iZXIgb2YgaXRlbXMgaW4gY2FydFxuICAgICAgc2FtcGxlUHJvZHVjdFNlbGVjdG9yOidzYW1wbGUtcHJvZHVjdHMnIC8vZGV2ZWxvcG1lbnQgcHVycG9zZSBvbmx5XG4gIH07XG4gICAgPC9jb2RlPjwvcHJlPlxuICAgIDx0ZXh0YXJlYSBzdHlsZT1cImJvcmRlcjogbm9uZTtiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO1wiIGRpc2FibGVkIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcm93cz1cIjVcIj5cbiAgICBEZXBlbmRlbmN5IFxuICAgIFwianF1ZXJ5XCI6IFwiXjMuNS4wXCIsXG4gICAgXCJqcXVlcnktdWlcIjogXCJeMS4xMi4xXCIsXG4gICAgPC90ZXh0YXJlYT5cbjxocj5cbiAgICA8dGV4dGFyZWEgc3R5bGU9XCJib3JkZXI6IG5vbmU7XCIgZGlzYWJsZWQgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiByb3dzPVwiMTBcIj5cbiAgIDxib2R5PlxuICAgPHNwYW4gY2xhc3M9XCJjYXJ0LXRvdGFsLWl0ZW1zXCI+PC9zcGFuPlxuICAgPGRpdiBpZD1cIml0ZW0tbGlzdFwiPjwvZGl2PlxuICAgPC9ib2R5PlxuICAgIDxzY3JpcHQgc3JjPVwianF1ZXJ5Lm1pbi5qc1wiPjwvc2NyaXB0PlxuICAgIDxzY3JpcHQgc3JjPVwianF1ZXJ5LXVpLmpzXCI+PC9zY3JpcHQ+XG4gICAgPHNjcmlwdD5cbiAgICAgICAgY2FydEpzQ29uZmlnID0ge1xuICAgICAgICAgICAgbGlzdFNlbGVjdG9yOidpdGVtLWxpc3QnLFxuICAgICAgICAgICAgYWRkVG9DYXJ0QnV0dG9uU2VsZWN0b3I6J2FkZC10by1jYXJ0LWJ1dHRvbicsXG4gICAgICAgICAgICB0b3RhbENhcnRJdGVtU2VsZWN0b3I6J2NhcnQtdG90YWwtaXRlbXMnLFxuICAgICAgICAgICAgc2FtcGxlUHJvZHVjdFNlbGVjdG9yOidzYW1wbGUtcHJvZHVjdHMnXG4gICAgICAgIH07XG4gICAgPC9zY3JpcHQ+XG4gICAgPHNjcmlwdCBzcmM9XCJjYXJ0LmpzXCI+PC9zY3JpcHQ+XG4gICAgPC90ZXh0YXJlYT5cbiAgICBgKTtcbiAgICB0aGlzLmNhcnRFdmVudHMudHJpZ2dlckFkZFRvQ2FydEJ1dHRvbigpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBcHB9IGZyb20gJy4vbW9kZWxzL2FwcC5tb2RlbCc7XG52YXIgYXBwID0gbmV3IEFwcCgpO1xuIiwiaW1wb3J0IHtSZW5kZXJ9IGZyb20gXCIuLi9yZW5kZXJcIjtcbmltcG9ydCB7VmFyaWF0aW9uRXZlbnRzfSBmcm9tIFwiLi4vdmFyaWF0aW9uRXZlbnRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3RvciB7XG4gICAgbGlzdFNlbGVjdG9yPzogc3RyaW5nO1xuICAgIHN1bW1hcnlTZWxlY3Rvcj86IHN0cmluZztcbiAgICBhZGRUb0NhcnRCdXR0b25TZWxlY3Rvcjogc3RyaW5nO1xuICAgIHRvdGFsQ2FydEl0ZW1TZWxlY3Rvcjogc3RyaW5nO1xuICAgIHNhbXBsZVByb2R1Y3RTZWxlY3Rvcj86IHN0cmluZztcbiAgICBwcmljZVNlbGVjdG9yPzpzdHJpbmdcbn1cblxuZXhwb3J0IGNsYXNzIEFwcCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgLy8gcHJpdmF0ZSB2YXJpYXRpb25FdmVudCA9IG5ldyBWYXJpYXRpb25FdmVudHMoKVxuICAgICkge1xuICAgICAgICBjb25zdCByZW5kZXJlciA9IG5ldyBSZW5kZXIoKTtcbiAgICAgICAgY29uc3Qgb2JzZXJ2YWJsZSA9IHJlbmRlcmVyLmNhcnRFdmVudHMuY2FydEl0ZW0uc3Vic2NyaWJlKCh4KSA9PlxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHgpXG4gICAgICAgICk7XG4gICAgICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9ICgpID0+IG9ic2VydmFibGUudW5zdWJzY3JpYmUoKTtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9